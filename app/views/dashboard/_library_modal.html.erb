<div id="libraryModal" class="pitch-modal modal hide">
        <div class="modal-content pitch-modal-content">
            <span class="close">&times;</span>
            <div class="heading">
                <h3>Text, Video oder Bild hinzufügen!</h3>
            </div>
            <div class="card" id="content_card">
                <div class="head">
                    <% if @folder %>
                    <h3><span onclick="openFolder(null, 'first')">Libary</span> <% if @folder.content_folder %><% if @folder.content_folder.content_folder %><i class="fas fa-caret-right"></i> <span>...</span> <% end %><i class="fas fa-caret-right"></i> <span onclick="openFolder('<%= @folder.content_folder_id %>')"><%= @folder.content_folder.name %></span> <% end %><i class="fas fa-caret-right"></i> <span><%= @folder.name %></span></h3>
                    <% else %>
                    <h3>Text, Video oder Bild hinzufügen!</h3>
                    <% end %>
                </div>
                <div id="scrollcontent">
                <% if folders.count != 0 %>
                <div class="folders">
                    <h3>Ordner</h3>
                    <% folders.each do |f| %>
                        <div class="card" onclick="openFolder('<%= f.id %>')">
                            <%= image_tag 'dash/icons/folder.svg' %>
                            <div class="title" id="title_<%= f.id %>"><%= f.name %><div class="ellipsis">...</div></div>
                            <div class="author"><%= f.user ? f.user.fname[0] + '. ' + f.user.lname : '' %></div>
                        </div>
                    <% end %>
                </div>
                <% end %>
                <% if files.count != 0 %>
                <div class="files">
                    <h3>Dateien</h3>
                    <% files.each do |f| %>
                        <div class="card">
                            <div class="thumb">
                                    <% if f.media_type == 'video' %>
                                        <%= image_tag f.video.thumb.url,  class: 'image' %>
                                        <i class="fas fa-play-circle"></i>
                                    <% elsif f.media_type == 'image' %>
                                        <% if f.image.present? %>
                                        <%= image_tag f.image.url,  class: 'image' %>
                                        <% end %>
                                    <% end %>
            
                            </div>
                            <div class="text">
                                    <div class="title" id="media_title_<%= f.id %>"><%= f.title? ? f.title : f.tasks.first&.title %><div class="ellipsis">...</div></div>
                                    <div class="time"><%= image_tag 'dash/video-icon.png' %><%= (f.duration / 60).to_s + ':' + (f.duration % 60).to_s %> - <%= f.user ? f.user.fname[0] + '. ' + f.user.lname : '' %></div>
                            </div>
            
                        </div>
                    <% end %>
                </div>
                <% end %>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    
        new PerfectScrollbar('#scrollcontent')

        function openFolder(folder_id, type = '') {
            $.ajax({
                url: '<%= select_folder_path(@pitch) %>',
                type: 'GET',
                dataType: "script",
                data: {
                    folder_id: folder_id,
                    type: type
                },
                success: function (res) {
                }
            })
        }

        $('.close').on('click', function() {
            $('#libraryModal').hide();
        })

        // $(document).click(function (e) {
        //     if (($(e.target).is('.pitch-modal') && $(e.target).closest('.pitch-modal')) || $(e.target).closest('#cardList').length) {
        //         $('#pitchModal').hide();
        //     }
        // });
        
    </script>